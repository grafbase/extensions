//!file:grafbase/options.proto
syntax = "proto2";

import "google/protobuf/descriptor.proto";

package grafbase.graphql;

extend google.protobuf.MessageOptions {
  optional string object_directives = 58301;
  optional string input_object_directives = 58302;
}

extend google.protobuf.FieldOptions {
  optional string output_field_directives = 58301;
  optional string input_field_directives = 58302;
}

extend google.protobuf.EnumOptions {
  optional string enum_directives = 58301;
}

extend google.protobuf.EnumValueOptions {
  optional string enum_value_directives = 58301;
}

extend google.protobuf.ServiceOptions {
  optional bool default_to_query_fields = 58301;
  optional bool default_to_mutation_fields = 58302;
}

extend google.protobuf.MethodOptions {
  optional string directives = 58301;
  optional bool is_query = 58302;
  optional bool is_mutation = 58303;
}

//!file:inventory.proto
syntax="proto3";

import "grafbase/options.proto";

package test.inventory;

message SearchResponse {
  option (grafbase.graphql.object_directives) = "@key(fields: \"id\")";

  string id = 1 [(grafbase.graphql.output_field_directives) = "@deprecated(reason: \"Use IDV2\")"];
}

enum Color {
  option (grafbase.graphql.enum_directives) = "@deprecated(reason: \"Use ColorV2\")";

  RED = 0 [(grafbase.graphql.enum_value_directives) = "@deprecated @tag(name: \"private\")"];
  GREEN = 1;
  BLUE = 2 [(grafbase.graphql.enum_value_directives) = "@deprecated"];
}

message SearchRequest {
  option (grafbase.graphql.input_object_directives) = "@oneOf";

  string query = 1 [(grafbase.graphql.input_field_directives) = "@deprecated(reason: \"Use QueryV2\")"];
  Color colorFilter = 2;
}

service SearchService {
  rpc Search(SearchRequest) returns (SearchResponse) {
      option (grafbase.graphql.is_query) = true;
  }
}

service SearchService2 {
  option (grafbase.graphql.default_to_query_fields) = true;

  rpc Search2(SearchRequest) returns (SearchResponse) {
    option (grafbase.graphql.directives) = "@lookup";
  }
}

service SearchService3 {
  rpc Search3(SearchRequest) returns (SearchResponse);
}